Как сделать загрузочную флешку
cats: Linux, Windows, Прочее, Сисадминство, Устранение неполадок
tags: linux, windows, видео, Программы, сбой, Советы
2017-12-30 16-12 bootable-thumbdrive-creation

<p>Однажды включив компьютер, вы обнаружите что он не загружается. Айтишнику это не страшно, он знает что делать. А что делать обычным пользователям? Они зовут друга «программиста», а если таких нет, то компьютерного мастера, который «живёт рядом». Приезд такого мастера обойдётся от 3000р, но стоит им понять, что человек не разбирается в компьютерах, эта цена может увеличиться в разы.</p>
<p>Этого легко избежать, имея сисадминскую загрузочную USB флешку. Ведь с её помощью даже ничего не понимающий в компьютерах человек, сможет переустановить систему. Достаточно лишь базовых навыков в работе с ПК.<!--more--></p>
<p>В этой статье будет рассмотрен самый простой способ создания универсального загрузочного носителя. Полученная загрузочная флешка или жёсткий диск будет совместима как с BIOS, так и с UEFI. С неё впоследствии можно будет установить любую версию Windows, восстановить существующую систему или вытащить данные с компьютера который не загружается.</p>
<p>Процесс создания универсальной сисадминской флешки будет поделён на 3 этапа:</p>
<ol>
	<li>Качаем образ, и все необходимые программы: Bootice и 7-zip (в Windows 8 и выше или если есть какой-нибудь эмулятор CD, можно просто смонтировать iso, не распаковывая его)</li>
	<li>С помощью Bootice записываем загрузочный сектор на флешку. Флешка должна быть с Файловой Системой FAT32 (если это не так, то ФС нужно поменять на FAT32. Это можно сделать прямо из программы Bootice.)</li>
	<li>Распаковываем или монтируем скачанный iso образ и копируем его содержимое на флешку</li>
</ol>
<p><span style="color: #cc0000;"><em><strong>Все программы которые упоминаются в этой статье нужно запускать с правами администратора. Возможно на время работы нужно будет выключить антивирус, так как он может не дать записать загрузочный сектор на флешку и сильно замедлит распаковку ISO образа и копирование файлов.</strong></em></span></p>
<p>&nbsp;</p>
<h3>1. Скачивание образа</h3>
<p>Загрузочных образов на основе Windows существует огромное количество. Их использование отличается лишь тем с каких сайтов их скачивать. Мой любимый на данный момент Multiboot 2k10. К сожалению официальная страница этого образа находится на заблокированном в России торренте. Но автор данного образа регулярно выкладывает свежие версии на <a href="https://yadi.sk/d/gZuwMVTB3S44qD">Яндекс диск</a>, чем мы и воспользуемся чтобы скачать его. Переходим по <a href="https://yadi.sk/d/gZuwMVTB3S44qD">этой ссылке</a>, заходим в папку 2k10_Live и качаем 2k10_7.11.iso. Возможно на момент прочтения этой статьи вместо 7.11 будет более новая версия.</p>
<p><a href="ya-disk-2k10.png"><img class="alignnone size-medium wp-image-1223" src="ya-disk-2k10.png" alt="" width="300" height="123" /></a>   <a href="ya-disk-2k10-2.png"><img class="alignnone size-medium wp-image-1221" src="ya-disk-2k10-2.png" alt="" width="300" height="157" /></a></p>
<h3>2. Запись загрузочного сектора на флешку</h3>
<p>Пока образ качается, загружаем программу Bootice. С её помощью мы пропишем загрузочный сектор на нашу флешку. Это можно сделать и с помощью встроенного в Windows средства bootsect, однако такая флешка будет работать не на всех материнских платах. У меня одна такая плата есть, поэтому мы используем Bootice, как наиболее универсальное средство.<br />
 Родной сайт этой программы <a href="http://www.ipauly.com/">ipauly.com</a> – на китайском, причём на главной странице не последняя версия. Поэтому для удобства я выложил Bootice на своём сайте: <a href="/files/2013/07/download-links/BOOTICEx86.exe"><img src="download.gif" alt="download icon" width="24" height="16" />32 битная версия</a> <a href="/files/2013/07/download-links/BOOTICEx64.exe"><img src="download.gif" alt="download icon" width="24" height="16" />64 битная версия</a>.<br />
 В принципе можно её и не качать, а вытащить из образа, когда он скачается. <br />
 <a href="https://nnm-club.me/forum/viewtopic.php?t=806125">Официальная страница сборки</a> (<a href="https://ipv6.nnm-club.me/forum/viewtopic.php?t=806125">ipv6 версия</a>)</p>
<p>Работать с Bootice очень просто. После запуска нам понадобятся только 2 кнопки.</p>
<p><img class="alignnone wp-image-1225 size-full" src="bootice-main.png" alt="" width="418" height="293" /></p>
<p>Если флешка не в FAT32, её нужно переформатировать в FAT32. Проверить это можно в свойствах флешки в в окне Этот Компьютер:</p>
<p><img class="alignnone wp-image-1226 size-full" src="usb-flash-filesystem.png" alt="" width="569" height="361" /><br />
 в данном случае всё в порядке</p>
<p>Нажимаем Process MBR, затем кнопки в порядке, как показано на рисунке ниже:</p>
<p><img class="alignnone size-full wp-image-1228" src="bootice-mbr.png" alt="" width="375" height="500" /></p>
<p>После этого нажимаем Process PBR и кнопки в указанной последовательности:</p>
<p><img class="alignnone size-full wp-image-1229" src="bootice-pbr.png" alt="" width="592" height="526" /></p>
<h3>3. Копирование файлов на флешку</h3>
<p>Если флешка маленькая, как в моём случае, то после распаковки можно удалить некоторые файлы из этого образа. Я предлагаю удалить драйвера для видеокарт и антивирусы:</p>
<p>2k10\DriverPacks\Drivers\NT6x64\Video_*<br />
 2k10\DriverPacks\Drivers\NT6x32\Video_*<br />
 2k10\DriverPacks\Drivers\NT5x32\Video_*<br />
 2k10\Programs-2k10\AntiVir\KasperskyVRT<br />
 2k10\Programs-2k10\AntiVir\DrWeb<br />
 2k10\Programs-2k10\AntiVir\DrCureIt</p>
<p><a href="remove-drivers.png"><img class="alignnone wp-image-1231 size-thumbnail" src="remove-drivers.png" alt="" width="150" height="150" /></a>  <a href="remove-antivir.png"><img class="alignnone wp-image-1232 size-thumbnail" src="remove-antivir.png" alt="" width="150" height="150" /></a></p>
<p>После этого на 4 Гб флешку всё прекрасно влезает. Если флешка больше, но можно ничего не удалять.<br />
 Осталось лишь скопировать папки 2k10, efi и файл BOOTMGR на флешку и загрузочная флешка готова.</p>
<p>Видеоинструкция: как создать загрузочную USB флешку:<a href="https://www.youtube.com/watch?v=OyKykvs4NZ4" target="_blank" rel="noopener"><img class="yt-thumb alignnone wp-image-871 size-full" src="bootable-thumbdrive.png" width="1280" height="720" /></a></p>